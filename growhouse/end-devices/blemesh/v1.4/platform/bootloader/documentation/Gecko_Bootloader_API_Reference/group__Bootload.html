<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Gecko Bootloader API Reference: Bootload</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gecko Bootloader API Reference
   &#160;<span id="projectnumber">bootloader-v1.8.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Documentation</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://www.silabs.com"><span>silabs.com</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__Bootload.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Bootload<div class="ingroups"><a class="el" href="group__Core.html">Bootloader Core</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Methods to verify and bootload application images. </p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Bootload:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__Bootload.png" border="0" alt="" usemap="#group____Bootload"/>
<map name="group____Bootload" id="group____Bootload">
<area shape="rect" id="node1" href="group__Core.html" title="Core bootloader functionality. " alt="" coords="5,5,132,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac68d18895ca500f9669e86f98b9aa8e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#gac68d18895ca500f9669e86f98b9aa8e1">bootload_verifyApplication</a> (uint32_t startAddress)</td></tr>
<tr class="separator:gac68d18895ca500f9669e86f98b9aa8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a993c0d26da978062216ea041de0294"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#ga1a993c0d26da978062216ea041de0294">bootload_bootloaderCallback</a> (uint32_t offset, uint8_t data[], size_t length, void *context)</td></tr>
<tr class="separator:ga1a993c0d26da978062216ea041de0294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7cac4f6396d3b9263899ff1ef0c23e52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#ga7cac4f6396d3b9263899ff1ef0c23e52">bootload_applicationCallback</a> (uint32_t address, uint8_t data[], size_t length, void *context)</td></tr>
<tr class="separator:ga7cac4f6396d3b9263899ff1ef0c23e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09bbef5b5b4f94f59236797c5c79a992"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#ga09bbef5b5b4f94f59236797c5c79a992">bootloader_enforceSecureBoot</a> (void)</td></tr>
<tr class="separator:ga09bbef5b5b4f94f59236797c5c79a992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga664bb79a9b2b8d1ee455bbf7853592f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#ga664bb79a9b2b8d1ee455bbf7853592f8">bootload_commitBootloaderUpgrade</a> (uint32_t upgradeAddress, uint32_t size)</td></tr>
<tr class="separator:ga664bb79a9b2b8d1ee455bbf7853592f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99ec81554f10ea083a2d4361ce18d32c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#ga99ec81554f10ea083a2d4361ce18d32c">bootload_checkSeUpgradeVersion</a> (uint32_t upgradeVersion)</td></tr>
<tr class="separator:ga99ec81554f10ea083a2d4361ce18d32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb29b27c8740f0ac1585a192a09eb703"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Bootload.html#gadb29b27c8740f0ac1585a192a09eb703">bootload_commitSeUpgrade</a> (uint32_t upgradeAddress)</td></tr>
<tr class="separator:gadb29b27c8740f0ac1585a192a09eb703"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac68d18895ca500f9669e86f98b9aa8e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bootload_verifyApplication </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Verify the application image stored in the flash memory starting at the address startAddress.</p>
<p>If secure boot is enforced, the function will only return true if the cryptographic signature of the application is valid. Else, the application is verified according to the signature type defined in the <a class="el" href="structApplicationProperties__t.html" title="Application Properties struct. ">ApplicationProperties_t</a> structure embedded in the application. Silicon Labs wireless stacks take care of declaring this structure. Applications not using a full wireless stack may need to instantiate the structure themselves.</p>
<p>Examples of results when secure boot is not enforced:</p><ul>
<li>App has no signature: Valid if initial stack pointer and program counter have reasonable values</li>
<li>App has CRC checksum: Valid if checksum is valid</li>
<li>App has ECDSA signature: Valid if ECDSA signature is valid.</li>
</ul>
<p>When secure boot is enforced, only ECDSA signed applications with a valid signature are considered valid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startAddress</td><td>Starting address of the application</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the image is deemed valid </dd></dl>

</div>
</div>
<a class="anchor" id="ga1a993c0d26da978062216ea041de0294"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bootload_bootloaderCallback </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bootloader upgrade callback implementation</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Offset of bootloader data (byte counter incrementing from 0) </td></tr>
    <tr><td class="paramname">data</td><td>Raw bootloader data </td></tr>
    <tr><td class="paramname">length</td><td>Size in bytes of raw bootloader data. </td></tr>
    <tr><td class="paramname">context</td><td>A context variable defined by the implementation that is implementing this callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7cac4f6396d3b9263899ff1ef0c23e52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bootload_applicationCallback </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Image data callback implementation</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>Address (inside the raw image) the data starts at </td></tr>
    <tr><td class="paramname">data</td><td>Raw image data </td></tr>
    <tr><td class="paramname">length</td><td>Size in bytes of raw image data. Constrained to always be a multiple of four. </td></tr>
    <tr><td class="paramname">context</td><td>A context variable defined by the implementation that is implementing this callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga09bbef5b5b4f94f59236797c5c79a992"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bootloader_enforceSecureBoot </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Whether the bootloader should enforce secure boot</p>
<dl class="section return"><dt>Returns</dt><dd>True if secure boot is to be enforced. </dd></dl>

</div>
</div>
<a class="anchor" id="ga664bb79a9b2b8d1ee455bbf7853592f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bootload_commitBootloaderUpgrade </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>upgradeAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a bootloader upgrade using the upgrade image present at upgradeAddress with length size.</p>
<p>If the bootloader upgrade process starts successfully, this function does not return, and execution will resume from the reset handler of the upgraded bootloader.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">upgradeAddress</td><td>The starting address of the upgrade image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The length of the upgrade image in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if the bootloader upgrade process didn't start </dd></dl>

</div>
</div>
<a class="anchor" id="ga99ec81554f10ea083a2d4361ce18d32c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bootload_checkSeUpgradeVersion </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>upgradeVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check that an SE upgrade with a given version number is allowed to be installed.</p>
<p>This will only be true if the upgrade version is higher than the running version.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">upgradeVersion</td><td>The version of the SE upgrade image</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the SE upgrade image should be installed </dd></dl>

</div>
</div>
<a class="anchor" id="gadb29b27c8740f0ac1585a192a09eb703"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bootload_commitSeUpgrade </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>upgradeAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform an SE upgrade using the upgrade image present at upgradeAddress.</p>
<p>If the SE upgrade process starts successfully, this function does not return, and execution will resume from the reset handler after the SE upgrade is complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">upgradeAddress</td><td>The starting address of the upgrade image</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if the SE upgrade process didn't start </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Mar 5 2019 08:24:17 for Gecko Bootloader API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
